goog.provide("jstestdriver.TestRunFilter");goog.require("jstestdriver");jstestdriver.TestRunFilter=function(a){this.testCaseInfo_=a};jstestdriver.TestRunFilter.prototype.getDefaultTestRunConfiguration=function(){return this.createTestRunConfiguration_(this.testCaseInfo_.getTestNames())};jstestdriver.TestRunFilter.prototype.getTestRunConfigurationFor=function(e){var d=this.filter_(e,this.regexMatcher_(/^[^-].*/));if(d.length<1){d.push("all")}var c=this.filter_(e,this.regexMatcher_(/^-.*/));var b=this.buildTestMethodMap_();var f=this.getExcludedTestIds_(b,c);var a=this.getMatchedTests_(b,d,f);return a.length>0?this.createTestRunConfiguration_(a):null};jstestdriver.TestRunFilter.prototype.createTestRunConfiguration_=function(a){return new jstestdriver.TestRunConfiguration(this.testCaseInfo_,a)};jstestdriver.TestRunFilter.prototype.regexMatcher_=function(a){return function(b){return a.test(b)}};jstestdriver.TestRunFilter.prototype.buildTestMethodMap_=function(){var a={};var d=this.testCaseInfo_.getTestNames();var e=d.length;for(var c=0;c<e;++c){var b=d[c];if(this.isTestMethod_(b)){a[this.buildTestMethodId_(b)]=b}}return a};jstestdriver.TestRunFilter.prototype.isTestMethod_=function(a){return/^test.*/.test(a)};jstestdriver.TestRunFilter.prototype.buildTestMethodId_=function(a){return this.testCaseInfo_.getTestCaseName()+"#"+a};jstestdriver.TestRunFilter.prototype.filter_=function(c,d){var a=[];for(var b=0;b<c.length;++b){if(d(c[b])){a.push(c[b])}}return a};jstestdriver.TestRunFilter.prototype.getExcludedTestIds_=function(a,b){var f={};for(var c=0;c<b.length;++c){var g=b[c].substring(1);var e=new RegExp(g);for(var d in a){if(e.test(d)){f[d]=true}}}return f};jstestdriver.TestRunFilter.prototype.getMatchedTests_=function(b,c,g){var a=[];for(var d=0;d<c.length;d++){var h=c[d];if(h=="all"){h=".*"}var f=new RegExp(h);for(var e in b){if(f.test(e)&&!g[e]){a.push(b[e])}}}return a};