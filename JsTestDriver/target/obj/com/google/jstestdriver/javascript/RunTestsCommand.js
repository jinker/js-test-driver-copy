jstestdriver.RunTestsCommand=function(g,f,a,d,c,e,h,b){this.testCaseManager_=g;this.testRunner_=f;this.pluginRegistrar_=a;this.jsonParse_=e;this.streamContinue_=h;this.streamStop_=b;this.now_=c;this.boundOnTestDone_=jstestdriver.bind(this,this.onTestDone_);this.boundOnComplete_=jstestdriver.bind(this,this.onComplete_);this.testsDone_=[];this.getBrowserInfo_=d};jstestdriver.RunTestsCommand.prototype.runAllTests=function(b){var a=b[0];this.debug_=Boolean(b[2]);this.runTestCases_(this.testCaseManager_.getDefaultTestRunsConfiguration(),a=="true"?true:false)};jstestdriver.RunTestsCommand.prototype.runTests=function(b){var c=this.jsonParse_('{"expressions":'+b[0]+"}").expressions;var a=b[1];this.debug_=Boolean(b[2]);jstestdriver.log("jstestdriver.RunTestsCommand.prototype.runTests: running tests "+b);this.runTestCases_(this.testCaseManager_.getTestRunsConfigurationFor(c),a=="true"?true:false)};jstestdriver.RunTestsCommand.prototype.runTestCases_=function(a,b){this.lastTestResultsSent_=this.now_();this.testRunner_.runTests(a,this.boundOnTestDone_,this.boundOnComplete_,b)};jstestdriver.RunTestsCommand.prototype.sendTestResults=function(){if(this.testsDone_.length>0){var a=new jstestdriver.Response(jstestdriver.RESPONSE_TYPES.TEST_RESULT,JSON.stringify(this.testsDone_),this.getBrowserInfo_());this.testsDone_=[];this.streamContinue_(a)}};jstestdriver.RunTestsCommand.prototype.onTestDone_=function(a){this.addTestResult(a);var b=this.now_()-this.lastTestResultsSent_;if((a.result=="error"||a.log!=""||this.debug_||b>jstestdriver.TIMEOUT)){this.lastTestResultsSent_=this.now_();this.sendTestResults()}};jstestdriver.RunTestsCommand.prototype.addTestResult=function(a){this.pluginRegistrar_.processTestResult(a);this.testsDone_.push(a)};jstestdriver.RunTestsCommand.prototype.sendTestResultsOnComplete_=function(){var a=new jstestdriver.Response(jstestdriver.RESPONSE_TYPES.TEST_RESULT,JSON.stringify(this.testsDone_),this.getBrowserInfo_());this.testsDone_=[];this.streamStop_(a)};jstestdriver.RunTestsCommand.prototype.onComplete_=function(){this.sendTestResultsOnComplete_()};