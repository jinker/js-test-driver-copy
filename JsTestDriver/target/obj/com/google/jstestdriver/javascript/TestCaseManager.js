goog.require("jstestdriver");goog.provide("jstestdriver.TestCaseManager");jstestdriver.TestCaseManager=function(a){this.testCasesInfo_=[];this.fileToTestCaseMap_={};this.testCaseToFileMap_={};this.latestTestCaseInfo_=null;this.pluginRegistrar_=a;this.recentCases_=[]};jstestdriver.TestCaseManager.prototype.add=function(b){var a=this.indexOf_(b);if(a!=-1){throw new Error("duplicate test case names! On "+b+" and "+this.testCasesInfo_[a]+" in "+this.testCasesInfo_[a].getFileName())}else{this.testCasesInfo_.push(b);this.recentCases_.push(b)}};jstestdriver.TestCaseManager.prototype.updateLatestTestCase=function(a){if(this.recentCases_.length){this.fileToTestCaseMap_[a]=this.recentCases_;for(var b=0;this.recentCases_[b];b++){this.recentCases_[b].setFileName(a)}this.recentCases_=[]}};jstestdriver.TestCaseManager.prototype.removeTestCaseForFilename=function(a){var b=this.fileToTestCaseMap_[a]||[];this.fileToTestCaseMap_[a]=null;delete this.fileToTestCaseMap_[a];while(b.length){this.removeTestCase_(this.indexOf_(b.pop()))}};jstestdriver.TestCaseManager.prototype.removeTestCase_=function(b){var a=this.testCasesInfo_.splice(b,1)};jstestdriver.TestCaseManager.prototype.indexOf_=function(a){var c=this.testCasesInfo_.length;for(var b=0;b<c;b++){var d=this.testCasesInfo_[b];if(d.equals(a)){return b}}return -1};jstestdriver.TestCaseManager.prototype.getDefaultTestRunsConfiguration=function(){var a=[];var d=this.testCasesInfo_.length;for(var c=0;c<d;c++){var b=this.testCasesInfo_[c];a.push(b.getDefaultTestRunConfiguration())}return a};jstestdriver.TestCaseManager.prototype.getTestRunsConfigurationFor=function(b){var a=[];this.pluginRegistrar_.getTestRunsConfigurationFor(this.testCasesInfo_,b,a);return a};jstestdriver.TestCaseManager.prototype.getTestCasesInfo=function(){return this.testCasesInfo_};jstestdriver.TestCaseManager.prototype.getCurrentlyLoadedTestCases=function(){var d=[];var c=this.testCasesInfo_.length;for(var b=0;b<c;b++){var a=this.testCasesInfo_[b];d.push({"name":a.getTestCaseName(),"tests":a.getTestNames()})}return{numTests:d.length,testCases:d}};jstestdriver.TestCaseManager.prototype.getCurrentlyLoadedTestCasesFor=function(g){var b=this.getTestRunsConfigurationFor(g);var e=b.length;var h=[];for(var d=0;d<e;d++){var a=b[d];var c=a.getTestCaseInfo();var f=a.getTests();h.push({"name":c.getTestCaseName(),"tests":c.getTestNames(),"fileName":c.getFileName()})}return{numTests:h.length,testCases:h}};jstestdriver.TestCaseManager.prototype.getCurrentlyLoadedTest=function(){var h=[];var e=this.testCasesInfo_.length;for(var d=0;d<e;d++){var b=this.testCasesInfo_[d];var g=b.getTestCaseName();var f=b.getTestNames();var c=f.length;for(var a=0;a<c;a++){h.push(g+"."+f[a])}}return{numTests:h.length,testNames:h}};jstestdriver.TestCaseManager.prototype.getCurrentlyLoadedTestFor=function(g){var l=this.getTestRunsConfigurationFor(g);var m=l.length;var f=[];for(var e=0;e<m;e++){var k=l[e];var b=k.getTestCaseInfo().getTestCaseName();var a=k.getTests();var d=a.length;for(var c=0;c<d;c++){var h=a[c];f.push(b+"."+h)}}return{numTests:f.length,testNames:f}};