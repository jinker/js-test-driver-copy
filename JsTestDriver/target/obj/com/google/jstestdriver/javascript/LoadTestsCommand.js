jstestdriver.LoadTestsCommand=function(c,a,b,d){this.jsonParse_=c;this.pluginRegistrar_=a;this.boundOnFileLoaded_=jstestdriver.bind(this,this.onFileLoaded);this.boundOnFileLoadedRunnerMode_=jstestdriver.bind(this,this.onFileLoadedRunnerMode);this.getBrowserInfo=b;this.onLoadComplete_=d};jstestdriver.LoadTestsCommand.prototype.loadTest=function(c){var e=c[0];var d=c[1]=="true"?true:false;var b=this.jsonParse_('{"f":'+e+"}").f;this.removeScripts(document,b);var a=new jstestdriver.FileLoader(this.pluginRegistrar_,this.boundOnFileLoaded_);a.load(b)};jstestdriver.LoadTestsCommand.prototype.onFileLoaded=function(a){var b=new jstestdriver.Response(jstestdriver.RESPONSE_TYPES.FILE_LOAD_RESULT,JSON.stringify(a),this.getBrowserInfo());this.onLoadComplete_(b)};jstestdriver.LoadTestsCommand.prototype.onFileLoadedRunnerMode=function(a){this.streamingService_.close(null,this.__boundExecuteCommand)};jstestdriver.LoadTestsCommand.prototype.findScriptTagsToRemove_=function(e,l){var c=e.getElementsByTagName("script");var a=l.length;var k=c.length;var b=[];for(var g=0;g<a;g++){var h=l[g].fileSrc;for(var d=0;d<k;d++){var m=c[d];if(m.src.indexOf(h)!=-1){b.push(m);break}}}return b};jstestdriver.LoadTestsCommand.prototype.removeScriptTags_=function(e,f){var d=e.getElementsByTagName("head")[0];var c=f.length;for(var b=0;b<c;b++){var a=f[b];d.removeChild(a)}};jstestdriver.LoadTestsCommand.prototype.removeScripts=function(b,a){this.removeScriptTags_(b,this.findScriptTagsToRemove_(b,a))};